<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>

</head>
<body>

<a href="/add_book">add</a> | <a href="/del_book">delete</a>

<script type="text/javascript">

//JSON輸出表格
function json_to_table(json_data) {
    t = "<table><tr>";
    for(var key in json_data[0]){
        t += "<td>" + key + "</td>";
    }
    t += "</tr>";
    for (var i = 0; i < json_data.length; i++) {
        t += "<tr>";
        for(var key in json_data[i]){
            t += ("<td>" + json_data[i][key] + "</td>");
        }
        t += ("</tr>");
    }
    t += ("</table>");
    return t
}

htmlobj=$.ajax({url:"/json_query",async:false});
var json = JSON.parse(htmlobj.responseText);
document.write(json_to_table(json));
</script>

</body>
</html>
